<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>C√†i ƒë·∫∑t h·ªá th·ªëng</title>

    <!-- Th∆∞ vi·ªán UI -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      rel="stylesheet"
    />
    <link href="../css/style.css" rel="stylesheet" />

    <style>
      /* Card upload ·∫£nh Cloudinary */
      .cloud-card {
        border: 0;
        border-radius: 14px;
        padding: 20px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        background: #fff;
      }

      /* Label ch√≠nh */
      .cloud-card h5 {
        font-weight: 600;
        color: #1e88e5;
      }

      /* Input file */
      .cloud-upload-input {
        padding: 10px;
        border-radius: 10px;
      }

      /* N√∫t upload */
      .btn-cloud-upload {
        background: #1e88e5;
        color: #fff;
        border-radius: 10px;
        padding: 10px 18px;
        transition: 0.2s ease;
      }

      .btn-cloud-upload:hover {
        background: #166dc0;
        transform: translateY(-1px);
      }

      /* Preview ·∫£nh */
      #uploadPreview {
        margin-top: 15px;
        border-radius: 12px;
        overflow: hidden;
        max-width: 260px;
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);
        display: none;
      }

      #uploadPreview img {
        width: 100%;
        height: auto;
      }

      /* Link k·∫øt qu·∫£ */
      #uploadResult a {
        font-weight: 600;
        text-decoration: none;
        color: #1e88e5;
      }

      /* T·ªëi ∆∞u m·ªôt ch√∫t giao di·ªán ph·∫ßn b·∫£ng t·ªìn th·∫•p */
      .card.border-0.shadow-sm {
        border-radius: 14px;
      }
      .table thead.sticky-top {
        top: 0;
        z-index: 1;
      }
      .table-responsive.rounded-3 {
        border: 1px solid #ddd;
      }
      .form-control[type="color"] {
        padding: 2px;
        height: 40px;
      }
    </style>
  </head>
  <nav class="mobile-bottom-nav d-lg-none">
    <a href="./index.html"
      ><i class="bi bi-speedometer2"></i><span>Dashboard</span></a
    >
    <a href="./home.html"><i class="bi bi-box"></i><span>Kho</span></a>
    <a href="./stats.html"
      ><i class="bi bi-bar-chart"></i><span>Th·ªëng k√™</span></a
    >
    <a href="./payment.html"
      ><i class="bi bi-cash-coin"></i><span>Thanh to√°n</span></a
    >
    <a href="./settings.html"><i class="bi bi-gear"></i><span>C√†i ƒë·∫∑t</span></a>
  </nav>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cloudinary-core/2.13.0/cloudinary-core-shrinkwrap.min.js"></script>

  <body>
    <!-- ... -->

    <!-- Overlay ƒë·ªÉ click ra ngo√†i l√† ƒë√≥ng -->
    <div id="sidebarOverlay" class="sidebar-overlay d-lg-none"></div>

    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar">
      <div class="sidebar-header d-flex align-items-center mb-4">
        <div class="sidebar-logo">
          <img
            id="sidebarLogo"
            src="https://cdn-icons-png.flaticon.com/512/679/679922.png"
            alt="Logo"
          />
        </div>
        <h3 class="sidebar-title m-0 ms-2">Kho ph·ª• t√πng</h3>
      </div>

      <ul>
        <li>
          <a href="index.html"><i class="bi bi-speedometer2"></i> Dashboard</a>
        </li>
        <li>
          <a href="home.html"><i class="bi bi-box"></i> Qu·∫£n l√Ω kho</a>
        </li>
        <li>
          <a href="stats.html"><i class="bi bi-bar-chart"></i> Th·ªëng k√™</a>
        </li>
        <li>
          <a href="payment.html"><i class="bi bi-cash-coin"></i> Thanh to√°n</a>
        </li>
        <li>
          <a href="settings.html" class="active"
            ><i class="bi bi-gear"></i> C√†i ƒë·∫∑t</a
          >
        </li>
      </ul>
    </aside>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="main">
      <div class="dashboard-header mb-4">
        <h2><i class="bi bi-gear me-2"></i> C√†i ƒë·∫∑t h·ªá th·ªëng</h2>
        <div class="text-muted small">C·∫≠p nh·∫≠t: th√°ng 10/2025</div>
      </div>

      <!-- CARD 1: C·∫•u h√¨nh h·ªá th·ªëng -->
      <div class="card p-4 mb-4 border-0 shadow-sm">
        <h5 class="fw-semibold text-primary mb-3">
          <i class="bi bi-hdd-network"></i> C·∫•u h√¨nh h·ªá th·ªëng
        </h5>
        <form id="settingsForm" class="row g-3">
          <div class="col-md-6">
            <label class="form-label">T√™n c·ª≠a h√†ng</label>
            <input
              id="storeName"
              class="form-control"
              placeholder="VD: Kho ph·ª• t√πng ƒê√¨nh H√≥a"
            />
          </div>
          <div class="col-md-3">
            <label class="form-label">ƒê∆°n v·ªã ti·ªÅn t·ªá</label>
            <select id="currency" class="form-select">
              <option value="‚Ç´">‚Ç´ - Vi·ªát Nam</option>
              <option value="$">$ - USD</option>
            </select>
          </div>
          <div class="col-md-3">
            <label class="form-label">ƒê·ªãa ch·ªâ API Backend</label>
            <input
              id="apiUrl"
              class="form-control"
              placeholder="http://localhost:3000/api"
            />
            <button
              type="button"
              class="btn btn-outline-secondary mt-2"
              id="btnTestAPI"
            >
              <i class="bi bi-wifi"></i> Ki·ªÉm tra k·∫øt n·ªëi API
            </button>
          </div>
        </form>
      </div>

      <!-- CARD 2: Giao di·ªán & logo -->
      <div class="card p-4 mb-4 border-0 shadow-sm">
        <h5 class="fw-semibold text-primary mb-3">
          <i class="bi bi-palette"></i> Giao di·ªán & logo
        </h5>
        <div class="row g-3">
          <div class="col-md-4">
            <label class="form-label">M√†u ch·ªß ƒë·∫°o</label>
            <input
              type="color"
              id="themeColor"
              class="form-control form-control-color"
              value="#1e88e5"
            />
          </div>
          <div class="col-md-8">
            <label class="form-label">Thay ƒë·ªïi logo sidebar</label>
            <input
              id="logoUpload"
              type="file"
              class="form-control"
              accept="image/*"
            />
          </div>
        </div>
        <br />
        <!-- N√∫t thao t√°c chung -->
        <div class="d-flex justify-content-end gap-3">
          <button id="btnResetSettings" class="btn btn-outline-danger">
            <i class="bi bi-arrow-counterclockwise me-1"></i> Kh√¥i ph·ª•c m·∫∑c ƒë·ªãnh
          </button>
          <button id="btnSaveSettings" class="btn btn-primary">
            <i class="bi bi-save me-1"></i> L∆∞u c·∫•u h√¨nh
          </button>
        </div>
      </div>

      <!-- CARD 3: Ki·ªÉm tra h√†ng t·ªìn kho th·∫•p (c√≥ ·∫£nh + ph√¢n trang) -->
      <div class="card p-4 mb-4 border-0 shadow-sm">
        <h5 class="fw-semibold text-primary mb-3">
          <i class="bi bi-box-seam"></i> Ki·ªÉm tra h√†ng t·ªìn kho th·∫•p
        </h5>

        <div class="row align-items-end mb-3">
          <div class="col-md-4">
            <label class="form-label">Ng∆∞·ª°ng c·∫£nh b√°o (s·ªë l∆∞·ª£ng &lt;)</label>
            <input
              type="number"
              id="lowStockThreshold"
              class="form-control"
              value="5"
              min="1"
              max="100"
            />
          </div>
          <div class="col-md-8 d-flex gap-2">
            <button id="btnShowLowStock" class="btn btn-outline-primary mt-3">
              <i class="bi bi-search"></i> Hi·ªÉn th·ªã h√†ng t·ªìn th·∫•p
            </button>
            <button
              id="btnExportLowStock"
              class="btn btn-outline-success mt-3"
              disabled
            >
              <i class="bi bi-file-earmark-excel"></i> Xu·∫•t Excel
            </button>
          </div>
        </div>
        <!-- Upload h√¨nh ·∫£nh l√™n Cloudinary -->

        <!-- B·∫£ng hi·ªÉn th·ªã -->
        <div class="table-responsive shadow-sm rounded-3">
          <table class="table table-hover align-middle text-center mb-0">
            <thead class="table-light sticky-top">
              <tr>
                <th>#</th>
                <th>·∫¢nh</th>
                <th>T√™n s·∫£n ph·∫©m</th>
                <th>H√£ng xe</th>
                <th>D√≤ng xe</th>
                <th>Lo·∫°i</th>
                <th>Gi√°</th>
                <th class="text-danger">T·ªìn kho</th>
                <th>Ng√†y nh·∫≠p</th>
              </tr>
            </thead>
            <tbody id="lowStockBody">
              <tr>
                <td colspan="9" class="text-muted py-3">
                  <i class="bi bi-hourglass-split me-1"></i> Ch∆∞a t·∫£i d·ªØ li·ªáu
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Hi·ªáu ·ª©ng ƒë·∫øm + Ph√¢n trang -->
        <div class="d-flex justify-content-between align-items-center mt-3">
          <div class="text-secondary small" id="lowStockInfo"></div>
          <div class="btn-group">
            <button id="lowPrev" class="btn btn-outline-primary btn-sm">
              Tr∆∞·ªõc
            </button>
            <span id="lowPageInfo" class="btn btn-light btn-sm disabled"
              >Trang 1</span
            >
            <button id="lowNext" class="btn btn-outline-primary btn-sm">
              Sau
            </button>
          </div>
        </div>
      </div>
      <div class="card p-4 mb-4 border-0 shadow-sm">
        <h5 class="fw-semibold text-primary mb-3">
          <i class="bi bi-cloud-upload"></i> Upload ·∫£nh l√™n Cloudinary
        </h5>

        <input
          id="cloudinaryUpload"
          type="file"
          class="form-control mb-3"
          accept="image/*"
        />

        <button class="btn btn-primary" id="btnUploadCloudinary">
          <i class="bi bi-cloud-arrow-up"></i> Upload ·∫£nh
        </button>

        <div id="uploadResult" class="mt-3 fw-semibold text-success"></div>
      </div>
    </main>

    <!-- üîî Toast -->
    <div
      class="position-fixed top-0 start-50 translate-middle-x p-3"
      style="z-index: 1100"
    >
      <div id="toastContainer" class="toast-container text-center"></div>
    </div>

    <!-- Script -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="../js/settings.js"></script>
  </body>
</html>
